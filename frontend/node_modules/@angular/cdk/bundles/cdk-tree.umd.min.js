/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/cdk/collections"),require("rxjs/operators/take"),require("@angular/core"),require("rxjs/operators/takeUntil"),require("rxjs/BehaviorSubject"),require("rxjs/Observable"),require("rxjs/observable/of"),require("rxjs/Subject"),require("@angular/cdk/bidi"),require("@angular/cdk/coercion"),require("@angular/cdk/a11y"),require("@angular/common")):"function"==typeof define&&define.amd?define(["exports","@angular/cdk/collections","rxjs/operators/take","@angular/core","rxjs/operators/takeUntil","rxjs/BehaviorSubject","rxjs/Observable","rxjs/observable/of","rxjs/Subject","@angular/cdk/bidi","@angular/cdk/coercion","@angular/cdk/a11y","@angular/common"],t):t((e.ng=e.ng||{},e.ng.cdk=e.ng.cdk||{},e.ng.cdk.tree=e.ng.cdk.tree||{}),e.ng.cdk.collections,e.Rx.operators,e.ng.core,e.Rx.operators,e.Rx,e.Rx,e.Rx.Observable,e.Rx,e.ng.cdk.bidi,e.ng.cdk.coercion,e.ng.cdk.a11y,e.ng.common)}(this,function(e,t,r,n,o,i,s,a,d,c,u,l,p){"use strict";function h(e,t){function r(){this.constructor=e}b(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function f(){return Error("A valid data source must be provided.")}function g(){return Error("There can only be one default row without a when predicate function.")}function _(){return Error("Could not find a matching node definition for the provided node data.")}function y(){return Error("Could not find a tree control for the tree.")}function v(){return Error("Could not find functions for nested/flat tree in tree control.")}var b=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])},C=function(){function e(){this.expansionModel=new t.SelectionModel(!0)}return e.prototype.toggle=function(e){this.expansionModel.toggle(e)},e.prototype.expand=function(e){this.expansionModel.select(e)},e.prototype.collapse=function(e){this.expansionModel.deselect(e)},e.prototype.isExpanded=function(e){return this.expansionModel.isSelected(e)},e.prototype.toggleDescendants=function(e){this.expansionModel.isSelected(e)?this.collapseDescendants(e):this.expandDescendants(e)},e.prototype.collapseAll=function(){this.expansionModel.clear()},e.prototype.expandDescendants=function(e){var t=[e];t.push.apply(t,this.getDescendants(e)),(r=this.expansionModel).select.apply(r,t);var r},e.prototype.collapseDescendants=function(e){var t=[e];t.push.apply(t,this.getDescendants(e)),(r=this.expansionModel).deselect.apply(r,t);var r},e}(),D=function(e){function t(t,r){var n=e.call(this)||this;return n.getLevel=t,n.isExpandable=r,n}return h(t,e),t.prototype.getDescendants=function(e){for(var t=this.dataNodes.indexOf(e),r=[],n=t+1;n<this.dataNodes.length&&this.getLevel(e)<this.getLevel(this.dataNodes[n]);n++)r.push(this.dataNodes[n]);return r},t.prototype.expandAll=function(){(e=this.expansionModel).select.apply(e,this.dataNodes);var e},t}(C),m=function(e){function t(t){var r=e.call(this)||this;return r.getChildren=t,r}return h(t,e),t.prototype.expandAll=function(){var e=this;this.expansionModel.clear();var t=[];this.dataNodes.forEach(function(r){return t.push.apply(t,e.getDescendants(r))}),(r=this.expansionModel).select.apply(r,t);var r},t.prototype.getDescendants=function(e){var t=[];return this._getDescendants(t,e),t},t.prototype._getDescendants=function(e,t){var n=this;e.push(t),this.getChildren(t).pipe(r.take(1)).subscribe(function(t){t&&t.length>0&&t.forEach(function(t){return n._getDescendants(e,t)})})},t}(C),x=function(){function e(e){this.$implicit=e}return e}(),N=function(){function e(e){this.template=e}return e.decorators=[{type:n.Directive,args:[{selector:"[cdkTreeNodeDef]",inputs:["when: cdkTreeNodeDefWhen"]}]}],e.ctorParameters=function(){return[{type:n.TemplateRef}]},e}(),k=function(){function e(e){this.viewContainer=e}return e.decorators=[{type:n.Directive,args:[{selector:"[cdkTreeNodeOutlet]"}]}],e.ctorParameters=function(){return[{type:n.ViewContainerRef}]},e}(),S=function(){function e(t,r){this._elementRef=t,this._tree=r,this._destroyed=new d.Subject,this.role="treeitem",e.mostRecentTreeNode=this}return Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this._setRoleFromData()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isExpanded",{get:function(){return this._tree.treeControl.isExpanded(this._data)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._data):0},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype.focus=function(){this._elementRef.nativeElement.focus()},e.prototype._setRoleFromData=function(){var e=this;if(this._tree.treeControl.isExpandable)this.role=this._tree.treeControl.isExpandable(this._data)?"group":"treeitem";else{if(!this._tree.treeControl.getChildren)throw v();this._tree.treeControl.getChildren(this._data).pipe(o.takeUntil(this._destroyed)).subscribe(function(t){e.role=t&&t.length?"group":"treeitem"})}},e.mostRecentTreeNode=null,e.decorators=[{type:n.Directive,args:[{selector:"cdk-tree-node",exportAs:"cdkTreeNode",host:{"[attr.aria-expanded]":"isExpanded","[attr.aria-level]":"level","[attr.role]":"role",class:"cdk-tree-node"}}]}],e.ctorParameters=function(){return[{type:n.ElementRef},{type:O}]},e.propDecorators={role:[{type:n.Input}]},e}(),O=function(){function e(e,t){this._differs=e,this._changeDetectorRef=t,this._onDestroy=new d.Subject,this.viewChange=new i.BehaviorSubject({start:0,end:Number.MAX_VALUE})}return Object.defineProperty(e.prototype,"dataSource",{get:function(){return this._dataSource},set:function(e){this._dataSource!==e&&this._switchDataSource(e)},enumerable:!0,configurable:!0}),e.prototype.ngOnInit=function(){if(this._dataDiffer=this._differs.find([]).create(),!this.treeControl)throw y()},e.prototype.ngOnDestroy=function(){this._nodeOutlet.viewContainer.clear(),this._onDestroy.next(),this._onDestroy.complete(),this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null)},e.prototype.ngAfterContentChecked=function(){var e=this._nodeDefs.filter(function(e){return!e.when});if(e.length>1)throw g();this._defaultNodeDef=e[0],this.dataSource&&this._nodeDefs&&!this._dataSubscription&&this._observeRenderChanges()},e.prototype._switchDataSource=function(e){this._dataSource&&"function"==typeof this._dataSource.disconnect&&this.dataSource.disconnect(this),this._dataSubscription&&(this._dataSubscription.unsubscribe(),this._dataSubscription=null),e||this._nodeOutlet.viewContainer.clear(),this._dataSource=e,this._nodeDefs&&this._observeRenderChanges()},e.prototype._observeRenderChanges=function(){var e,t=this;if("function"==typeof this._dataSource.connect?e=this._dataSource.connect(this):this._dataSource instanceof s.Observable?e=this._dataSource:Array.isArray(this._dataSource)&&(e=a.of(this._dataSource)),!e)throw f();this._dataSubscription=e.pipe(o.takeUntil(this._onDestroy)).subscribe(function(e){return t._renderNodeChanges(e)})},e.prototype._renderNodeChanges=function(e){var t=this,r=this._dataDiffer.diff(e);if(r){var n=this._nodeOutlet.viewContainer;r.forEachOperation(function(r,o,i){if(null==r.previousIndex)t.insertNode(e[i],i);else if(null==i)n.remove(o);else{var s=n.get(o);n.move(s,i)}})}},e.prototype._getNodeDef=function(e,t){if(1===this._nodeDefs.length)return this._nodeDefs.first;var r=this._nodeDefs.find(function(r){return r.when&&r.when(t,e)})||this._defaultNodeDef;if(!r)throw _();return r},e.prototype.insertNode=function(e,t,r){var n=this._getNodeDef(e,t),o=new x(e);(r||this._nodeOutlet.viewContainer).createEmbeddedView(n.template,o,t),S.mostRecentTreeNode&&(S.mostRecentTreeNode.data=e),this._changeDetectorRef.detectChanges()},e.decorators=[{type:n.Component,args:[{selector:"cdk-tree",exportAs:"cdkTree",template:"<ng-container cdkTreeNodeOutlet></ng-container>",host:{class:"cdk-tree",role:"tree"},encapsulation:n.ViewEncapsulation.None,preserveWhitespaces:!1,changeDetection:n.ChangeDetectionStrategy.OnPush}]}],e.ctorParameters=function(){return[{type:n.IterableDiffers},{type:n.ChangeDetectorRef}]},e.propDecorators={dataSource:[{type:n.Input}],treeControl:[{type:n.Input}],_nodeOutlet:[{type:n.ViewChild,args:[k]}],_nodeDefs:[{type:n.ContentChildren,args:[N]}]},e}(),T=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n._elementRef=t,n._tree=r,n}return h(t,e),t.prototype.ngAfterContentInit=function(){var e=this;if(!this._tree.treeControl.getChildren)throw v();this._tree.treeControl.getChildren(this.data).pipe(o.takeUntil(this._destroyed)).subscribe(function(t){t&&t.length&&(e._children=t,e._addChildrenNodes())}),this.nodeOutlet.changes.pipe(o.takeUntil(this._destroyed)).subscribe(function(t){return e._addChildrenNodes()})},t.prototype.ngOnDestroy=function(){this._clear(),this._destroyed.next(),this._destroyed.complete()},t.prototype._addChildrenNodes=function(){var e=this;this._clear(),this.nodeOutlet.length&&this._children&&this._children.length&&this._children.forEach(function(t,r){e._tree.insertNode(t,r,e.nodeOutlet.first.viewContainer)})},t.prototype._clear=function(){this.nodeOutlet&&this.nodeOutlet.first&&this.nodeOutlet.first.viewContainer.clear()},t.decorators=[{type:n.Directive,args:[{selector:"cdk-nested-tree-node",exportAs:"cdkNestedTreeNode",host:{"[attr.aria-expanded]":"isExpanded","[attr.role]":"role",class:"cdk-tree-node cdk-nested-tree-node"},providers:[{provide:S,useExisting:t}]}]}],t.ctorParameters=function(){return[{type:n.ElementRef},{type:O}]},t.propDecorators={nodeOutlet:[{type:n.ContentChildren,args:[k]}]},t}(S),w=function(){function e(e,t,r,n,i){var s=this;this._treeNode=e,this._tree=t,this._renderer=r,this._element=n,this._dir=i,this._destroyed=new d.Subject,this._indent=40,this._setPadding(),this._dir&&this._dir.change.pipe(o.takeUntil(this._destroyed)).subscribe(function(){return s._setPadding()})}return Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=u.coerceNumberProperty(e),this._setPadding()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"indent",{get:function(){return this._indent},set:function(e){this._indent=u.coerceNumberProperty(e),this._setPadding()},enumerable:!0,configurable:!0}),e.prototype.ngOnDestroy=function(){this._destroyed.next(),this._destroyed.complete()},e.prototype._paddingIndent=function(){var e=this._treeNode.data&&this._tree.treeControl.getLevel?this._tree.treeControl.getLevel(this._treeNode.data):null,t=this._level||e;return t?t*this._indent+"px":null},e.prototype._setPadding=function(){var e=this._paddingIndent(),t=this._dir&&"rtl"===this._dir.value?"padding-right":"padding-left";this._renderer.setStyle(this._element.nativeElement,t,e)},e.decorators=[{type:n.Directive,args:[{selector:"[cdkTreeNodePadding]"}]}],e.ctorParameters=function(){return[{type:S},{type:O},{type:n.Renderer2},{type:n.ElementRef},{type:c.Directionality,decorators:[{type:n.Optional}]}]},e.propDecorators={level:[{type:n.Input,args:["cdkTreeNodePadding"]}],indent:[{type:n.Input,args:["cdkTreeNodePaddingIndent"]}]},e}(),P=function(){function e(e,t){this._tree=e,this._treeNode=t,this._recursive=!0}return Object.defineProperty(e.prototype,"recursive",{get:function(){return this._recursive},set:function(e){this._recursive=u.coerceBooleanProperty(e)},enumerable:!0,configurable:!0}),e.prototype._toggle=function(e){this.recursive?this._tree.treeControl.toggleDescendants(this._treeNode.data):this._tree.treeControl.toggle(this._treeNode.data),e.stopPropagation()},e.decorators=[{type:n.Directive,args:[{selector:"[cdkTreeNodeToggle]",host:{"(click)":"_toggle($event)"}}]}],e.ctorParameters=function(){return[{type:O},{type:S}]},e.propDecorators={recursive:[{type:n.Input,args:["cdkTreeNodeToggleRecursive"]}]},e}(),j=[T,N,w,P,O,S,k],E=function(){function e(){}return e.decorators=[{type:n.NgModule,args:[{imports:[p.CommonModule],exports:j,declarations:j,providers:[l.FocusMonitor,N]}]}],e.ctorParameters=function(){return[]},e}();e.BaseTreeControl=C,e.FlatTreeControl=D,e.NestedTreeControl=m,e.CdkNestedTreeNode=T,e.CdkTreeNodeOutletContext=x,e.CdkTreeNodeDef=N,e.CdkTreeNodePadding=w,e.CdkTreeNodeOutlet=k,e.CdkTreeNode=S,e.CdkTree=O,e.getTreeNoValidDataSourceError=f,e.getTreeMultipleDefaultNodeDefsError=g,e.getTreeMissingMatchingNodeDefError=_,e.getTreeControlMissingError=y,e.getTreeControlFunctionsMissingError=v,e.CdkTreeModule=E,e.CdkTreeNodeToggle=P,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=cdk-tree.umd.min.js.map
